# Production Environment Configuration
# Do not commit this file - use environment variables from secrets manager

NODE_ENV=production

# Server Configuration
PORT=3000
API_PREFIX=api/v1

# Database Configuration
# Use connection pooling and SSL for production
DATABASE_URL="postgresql://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:5432/${DB_NAME}?schema=public&sslmode=require&connection_limit=20"

# JWT Configuration
# Use strong, randomly generated secrets from secrets manager
JWT_SECRET=${JWT_SECRET}
JWT_EXPIRES_IN=24h  # Shorter expiry in production

# Tezos Configuration
TEZOS_RPC_URL=https://mainnet.api.tez.ie
TEZOS_FALLBACK_RPC_URL=https://rpc.tzbeta.net
TEZOS_NETWORK=mainnet

# TzKT API Configuration
TZKT_API_URL=https://api.tzkt.io

# Logging Configuration
LOG_LEVEL=warn
LOG_FORMAT=json

# Monitoring & Metrics
ENABLE_METRICS=true
METRICS_PORT=9090

# Sentry Configuration
SENTRY_DSN=${SENTRY_DSN}
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1
SENTRY_ATTACH_STACKTRACE=true
SENTRY_DEBUG=false

# BullMQ Configuration (Redis)
REDIS_HOST=${REDIS_HOST}
REDIS_PORT=6379
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_DB=0
REDIS_TLS=true
REDIS_CLUSTER_MODE=false

# Job Scheduler Configuration
CYCLE_CHECK_INTERVAL=180000  # 3 minutes
BALANCE_POLL_INTERVAL=120000  # 2 minutes

# Rate Limiting (stricter in production)
RATE_LIMIT_TTL=60000  # 1 minute
RATE_LIMIT_MAX=60  # 60 requests per minute per IP

# CORS Configuration
CORS_ORIGIN=${ALLOWED_ORIGINS}  # Comma-separated list of allowed origins
CORS_CREDENTIALS=true

# Wallet Encryption
# Use strong, randomly generated keys from secrets manager
WALLET_ENCRYPTION_KEY=${WALLET_ENCRYPTION_KEY}
WALLET_ENCRYPTION_IV=${WALLET_ENCRYPTION_IV}

# Feature Flags
ENABLE_SWAGGER=false  # Disable in production for security
ENABLE_GRAPHQL=false
ENABLE_WEBHOOKS=true

# Development Tools (disabled in production)
ENABLE_DEBUG_ROUTES=false
ENABLE_PROFILER=false

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_S3_BUCKET=${BACKUP_S3_BUCKET}
BACKUP_S3_REGION=${AWS_REGION}
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM UTC

# Health Check Configuration
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_DATABASE=true
HEALTH_CHECK_REDIS=true
HEALTH_CHECK_TEZOS_RPC=true

# Security Configuration
HELMET_ENABLED=true
CSRF_PROTECTION=true
REQUEST_SIZE_LIMIT=1mb

# Performance Configuration
COMPRESSION_ENABLED=true
CACHE_TTL=300  # 5 minutes
MAX_QUERY_EXECUTION_TIME=30000  # 30 seconds

# Alerting Configuration
ALERT_EMAIL=${ALERT_EMAIL}
ALERT_SLACK_WEBHOOK=${ALERT_SLACK_WEBHOOK}
ALERT_ON_ERROR=true
ALERT_ON_HIGH_LATENCY=true
ALERT_LATENCY_THRESHOLD=2000  # 2 seconds

# Deployment Configuration
DEPLOYMENT_TIMESTAMP=${DEPLOYMENT_TIMESTAMP}
GIT_COMMIT_SHA=${GIT_COMMIT_SHA}
VERSION=${APP_VERSION}
