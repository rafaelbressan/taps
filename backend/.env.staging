# Staging Environment Configuration
# Do not commit this file - use environment variables in deployment

NODE_ENV=staging

# Server Configuration
PORT=3000
API_PREFIX=api/v1

# Database Configuration
# Override with actual staging database URL in deployment
DATABASE_URL="postgresql://taps_staging:${DB_PASSWORD}@staging-db.example.com:5432/taps_staging?schema=public&sslmode=require"

# JWT Configuration
# Use strong secrets from secrets manager
JWT_SECRET=${JWT_SECRET}
JWT_EXPIRES_IN=7d

# Tezos Configuration
TEZOS_RPC_URL=https://rpc.tzkt.io/ghostnet
TEZOS_FALLBACK_RPC_URL=https://ghostnet.ecadinfra.com
TEZOS_NETWORK=ghostnet

# TzKT API Configuration
TZKT_API_URL=https://api.ghostnet.tzkt.io

# Logging Configuration
LOG_LEVEL=info
LOG_FORMAT=json

# Monitoring & Metrics
ENABLE_METRICS=true
METRICS_PORT=9090

# Sentry Configuration
SENTRY_DSN=${SENTRY_DSN}
SENTRY_ENVIRONMENT=staging
SENTRY_TRACES_SAMPLE_RATE=0.5
SENTRY_PROFILES_SAMPLE_RATE=0.5

# BullMQ Configuration (Redis)
REDIS_HOST=${REDIS_HOST}
REDIS_PORT=6379
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_DB=0
REDIS_TLS=true

# Job Scheduler Configuration
CYCLE_CHECK_INTERVAL=300000  # 5 minutes
BALANCE_POLL_INTERVAL=180000  # 3 minutes

# Rate Limiting
RATE_LIMIT_TTL=60000  # 1 minute
RATE_LIMIT_MAX=100  # 100 requests per minute

# CORS Configuration
CORS_ORIGIN=https://staging.taps.example.com
CORS_CREDENTIALS=true

# Wallet Encryption
WALLET_ENCRYPTION_KEY=${WALLET_ENCRYPTION_KEY}
WALLET_ENCRYPTION_IV=${WALLET_ENCRYPTION_IV}

# Feature Flags
ENABLE_SWAGGER=true
ENABLE_GRAPHQL=false
ENABLE_WEBHOOKS=false

# Development Tools
ENABLE_DEBUG_ROUTES=false
ENABLE_PROFILER=true

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_S3_BUCKET=taps-staging-backups
BACKUP_S3_REGION=us-east-1
BACKUP_RETENTION_DAYS=7

# Health Check Configuration
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_DATABASE=true
HEALTH_CHECK_REDIS=true
HEALTH_CHECK_TEZOS_RPC=true
